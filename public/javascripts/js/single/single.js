!function(t){function e(a){if(o[a])return o[a].exports;var n=o[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){var a=o(1);a(".logged",logStatus),$(document).ready(function(){function t(t){function e(t){return t<10&&(t="0"+t),t}var a="";t.forEach(function(o,n){var s=new Date(o.time);a=s.getFullYear()+"-"+e(s.getMonth()+1)+"-"+e(s.getDate())+" "+e(s.getHours())+":"+e(s.getMinutes()),t[n].time=a}),$(".comments").html(o({datas:t}))}var e=$("#houseId").val();$("i.unlogged").on("tap",function(){location.href="/login"}),$(".goBack").on("tap",function(){location.href="/list"}),$(".info-tabs__tab").click(function(){$(window).scrollTo({toT:$($(this).find("a").data("href")).offset().top,durTime:120})}),$(".collect-icon").on("tap",function(t){if(t.stopPropagation(),logStatus){var o=$(this),a=$(".collect-count");o.hasClass("do-collect")?(o.removeClass("do-collect").addClass("donot-collect"),a.text(parseInt(a.text())-1),$.ajax({url:"/common/collect",type:"GET",data:{type:"0",id:e}})):o.hasClass("donot-collect")&&(o.removeClass("donot-collect").addClass("do-collect"),a.text(parseInt(a.text())+1),$.ajax({url:"/common/collect",type:"GET",data:{type:"1",id:e}}))}else location.href="/login"}),$(".like-icon").on("tap",function(t){if(t.stopPropagation(),logStatus){var o=$(this),a=$(".like-count");o.hasClass("do-like")?(o.removeClass("do-like").addClass("donot-like"),a.text(parseInt(a.text())-1),$.ajax({url:"/common/like",type:"GET",data:{type:"0",id:e}})):o.hasClass("donot-like")&&(o.removeClass("donot-like").addClass("do-like"),a.text(parseInt(a.text())+1),$.ajax({url:"/common/like",type:"GET",data:{type:"1",id:e}}))}else location.href="/login"}),_.templateSettings={evaluate:/{{([\s\S]+?)}}/g,interpolate:/{{=([\s\S]+?)}}/g,escape:/{{-([\s\S]+?)}}/g};var o=_.template($("#commentsTemplate").html());$.ajax({url:"/comment/getComments",type:"GET",data:{houseId:e},success:function(e){t(e)}});var a=$("#comment-input"),n=$(".reply-btn");n.tap(function(){if(!logStatus)return void(location.href="/login");if(a.val().length<3)return void alert("起码要说三个字吧？");var o=a.data("id")||"",s=a.val(),i={content:s,houseId:e};o&&(i.toId=o),$.ajax({url:"/comment/writeComment",type:"GET",data:i,success:function(e){t(e.data),a.val("").attr({placeholder:"你的看法..."}).removeAttr("data-id"),n.removeClass("reply-btn-shine");var o=$("#"+e.lastMsgId);$(window).scrollTo({toT:o.offset().top,durTime:300}),o.css({background:"#c2e1e1"}).animate({background:"#ffffff"},1400,"ease-out")}})}),$(".comments").on("tap",".comments__delete",function(o){$(this).parents(".comments__item").addClass("tap-from-delete"),$.ajax({url:"/comment/delComment",type:"GET",data:{id:$(this).data("id"),houseId:e,toId:$(this).data("toId")},success:function(e){t(e)}})}),$(".comments").on("tap",".comments__item",function(){var t=this;return $(t).find(".comments__delete").length?void(a.val()||a.attr({placeholder:"你的看法..."}).removeAttr("data-id")):void setTimeout(function(){if(!$(t).hasClass("tap-from-delete")){if(!logStatus)return void(location.href="/login");$(window).scrollTo({toT:$("#comments").offset().top,durTime:120}),setTimeout(function(){a.trigger("select").attr({placeholder:"回复"+$(t).data("from")+":","data-id":$(t).data("id")})},100)}},0)}),a.blur(function(){$(this).val()||a.attr({placeholder:"你的看法..."}).removeAttr("data-id")}),a.on("input",function(){a.val().length>2?n.hasClass("reply-btn-shine")||n.addClass("reply-btn-shine"):n.removeClass("reply-btn-shine")})})},function(t,e){var o=function(t,e){e&&$(document).ready(function(){var e=$(".mask--myinfo"),o=$(".myinfo");$(t).tap(function(){"none"===e.css("display")?(e.show(),$.ajax({url:"/login/getCollectCnt",type:"get",success:function(t){$($(".myinfo").contents()[0]).find("#mycollect-count").text(t.count)}}),$.ajax({url:"/login/getMessageCnt",type:"get",success:function(t){var e=$($(".myinfo").contents()[0]);e.find("#mymessage-count").text(t.count),t.count>0?e.find(".my-message").addClass("message-tip"):e.find(".my-message").removeClass("message-tip")}}),o.animate({width:"80%"},200,"ease-out")):(e.hide(),$($(".myinfo").contents()[0]).find("#mycollect-count").text(""),o.animate({width:"0"},200,"ease-out"))}),e.on("touchmove",function(t){t.preventDefault()}),e.tap(function(){e.hide(),o.animate({width:"0"},200,"ease-out")}),$(o.prop("contentWindow").document).on("touchmove",function(t){t.preventDefault()})})};t.exports=o}]);